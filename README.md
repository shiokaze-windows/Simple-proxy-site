Simple Authenticated Web Proxy with Video Streaming
このプロジェクトは、認証機能を備えたシンプルなウェブプロキシサーバーです。指定したURLのコンテンツをプロキシ経由で取得し、表示することができます。特に、YouTube動画のURLが入力された場合は、動画をダウンロードしてストリーミング再生する機能と、再生後に一定時間でファイルを自動削除する機能を持ちます。
機能
認証機能: パスワードによるアクセス制限があります。
ウェブプロキシ: 指定したURLのHTML、CSS、その他のリソースをプロキシ経由で取得し、URLを書き換えて表示します。
YouTube動画ストリーミング:
YouTube動画のURLを入力すると、動画をダウンロードします。
ダウンロードした動画ファイルへの直接リンクを提供し、ブラウザの標準機能でストリーミング再生します。
動画の長さに基づいて、ダウンロードしたファイルを自動的に削除します（最大2時間）。
ダウンロードファイル自動削除: 動画ファイルは、動画の長さの3倍の時間経過後、または最大2時間経過後のいずれか短い方で自動的に削除されます。
セットアップ
このプロジェクトを実行するには、Node.js、npm、yt-dlp、およびffmpegが必要です。
Node.jsとnpmのインストール: Node.jsの公式サイトからインストーラーをダウンロードしてインストールしてください。npmも同時にインストールされます。 https://nodejs.org/
yt-dlpのインストール: yt-dlpは動画ダウンロードに使用します。以下のコマンドでインストールできます（Pythonがインストールされている必要があります）。
pip install yt-dlp

または、OSに応じた方法でインストールしてください。詳細はyt-dlpの公式ドキュメントを参照してください。
ffmpegのインストール: ffmpegは動画ファイルの長さ取得に使用します。OSに応じた方法でインストールしてください。詳細はffmpegの公式サイトを参照してください。
プロジェクトファイルの取得: このリポジトリをクローンまたはダウンロードします。
依存パッケージのインストール: プロジェクトのルートディレクトリで以下のコマンドを実行します。
npm install


パスワードの設定: server.jsファイルを開き、SECRET_PASSWORDの値を任意の安全なパスワードに変更してください。
const SECRET_PASSWORD = 'your_secret_password'; // ここに実際のパスワードを設定してください ★★★重要★★★


実行方法
プロジェクトのルートディレクトリで以下のコマンドを実行すると、サーバーが起動します。
node server.js


サーバーが起動すると、コンソールに以下のメッセージが表示されます。
Proxy server running at http://localhost:3000/
Downloads will be saved in: [ダウンロードディレクトリのパス]
Access the login page at http://localhost:3000/login


使用方法
ブラウザで http://localhost:3000/login にアクセスします。
server.jsで設定したパスワードを入力してログインします。
ログイン後、表示されたページにプロキシ経由でアクセスしたいURLを入力し、「アクセス」ボタンをクリックします。
入力したURLのコンテンツがプロキシ経由で表示されます。YouTube動画のURLの場合は、動画がストリーミング再生されます。
依存関係
express
axios
cheerio
cookie-parser
express-session
fluent-ffmpeg
iconv-lite
qs
yt-dlp (システムにインストールされている必要があります)
ffmpeg (システムにインストールされている必要があります)
これらのパッケージは package.json に記載されており、npm install でインストールされます。
ライセンス
このプロジェクトは、特にライセンスが指定されていません。自由に利用、改変、再配布してください。
貢献
バグ報告や機能改善の提案は、GitHubのIssueまたはPull Requestでお待ちしています。
